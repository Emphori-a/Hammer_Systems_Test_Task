# Реферальная система Hammer_Systems_Test_Task Реферальная система

### Описание:
Простая реферальная система с возможностью авторизации по номеру телефона.

### Использованные технологии:

Python 3.9
Django 
djangorestframework 
djangorestframework-simplejwt 
PostgreSQL 13

### Запуск проекта

1) Создать БД Postgre для использования в приложении.
2) В корне проекта создать файл .env и указать в нем следующие настройки:
    - SECRET_KEY=django-insecure-279dw5a0yq!bqs-&a+l*^wl^dk^^dn_vtntc3zem_00_i6w%1a
    - NAME - имя созданной БД
    - USER - имя пользователя БД
    - PASSWORD - пароль пользователя БД
    - HOST - хост для подключения к БД
    - PORT - порт для подключения к БД
3) Создать и активировать виртуальное окружение.

```
python3 -m venv env
```

* Если у вас Linux/macOS

    ```
    source env/bin/activate
    ```

* Если у вас windows

    ```
    source env/scripts/activate
    ```

```
python3 -m pip install --upgrade pip
```
4) Установить зависимости из файла requirements.txt

```
pip install -r requirements.txt
```

5) Выполнить миграции

```
python3 manage.py migrate
```

6) Запустить проект

```
python3 manage.py runserver
```

### Реализованный функционал API

Документация к API: [http://127.0.0.1:8000/api/swagger/]  
API доступен по адресу [http://127.0.0.1:8000/api/v1/]

- `login/` - регистрация пользователя в системе по его номеру телефона, после успешной регистрации пользователю направляется код подтверждения
- `auth` - авторизаци пользователя в системе по коду подтверждения, после успешной авторизации пользователю направляется токен авторизации и код для приглашения других пользователей
- `profile`:
    - get-запрос возвращает информацию о пользователе, в том числе список пользователей(номеров телефона), которые ввели инвайт код текущего пользователя
    - patch-запрос позволяет ввести чужой инвайт-код 

### Коллекция Postman-запросов

Сформирована коллекция запросов Referal_system.postman_collection.json.
- при обращении к адресу login/ код верификации пользователя помещается в текстовый файл в папку hammer_systems_test_task/send_sms.
- код верификации необходимо передать в запрос на авторизацию по адресу auth/ в поле verification_code, при успешной верификации будет получен токен авторизации.
- токен авторизации необходимо передавать в заголовке запроса к адресу profile/

### Автор, контактная информация:

Мартынова Валерия
* e-mail: emphoria@yandex.ru
* @Emphori